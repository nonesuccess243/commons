<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>主页</title>
</head>
<body >

	websocket demo!
	
	<p></p>
	
	server said:
	
	<div id="div" style="border:1px"></div>
	
	<p></p>
	
	say some to server:
	
	<input type="text" id="input"/>
	<button onclick="submit();">submit</button>

<script type="text/javascript">
	
	console.log("init websocket");
	
	function getRootUri() {
        return (document.location.protocol === "https:" ? "wss://":"ws://") + (document.location.hostname == "" ? "localhost" : document.location.hostname) + ":" +
                (document.location.port == "" ? "80" : document.location.port);
    }
	
	var url = getRootUri();

	websocket = new WebSocket(url + "/wonbery/websocket");
	websocket.onopen = function(evt){
		console.log("connected");
	}
	websocket.onmessage = function(evt){
		console.log(evt.data);//
		
		document.getElementById("div").innerText = document.getElementById("div").innerText + "\n" + evt.data;
	}

	console.log("init websocket over");
	
	
	function submit(){
		websocket.send(document.getElementById("input").value);
		document.getElementById("input").value="";
	}




</script>

</body>
</html>
